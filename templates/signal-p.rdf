# Template for generating RDF triples from Signal-P output
#
# Convert signalP output to text with 
#
#   lynx --dump signal_p.html > signal_p.txt
#
# And create RDF with 
#
#   env INFILE=signal_p.txt erb ./lib/bio-rdf/rdf templates/signal-p.rdf
#
# Input can be prepended by a filename (see also templates/phobius.rdf)
#
<%= File.read(File.dirname(__FILE__)+'/preamble.rdf')  %>

<%
   File.open(ENV["INFILE"]).each_line do |line|
     fields = line.split
     if fields[9] == 'Y'
       gene = fields.first
       (species,source) = gene.scan(/(\w\w)_(CDS|DNA|EST)/)[0]
       id = BioRdf::Turtle.mangle_identifier(gene)
       m = gene.match(/\.\w\w\w:(\S+)$/)
       gene = m[1] if m
%>
  :<%= id %>  :gene_name   "<%= gene %>" .
  :<%= id %>  :species     "<%= species %>" .
  :<%= id %>  :source      "<%= source %>" .
  :<%= id %>  :signalP   true .
<%  end 
  end %>
